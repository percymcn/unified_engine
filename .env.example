# Production Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=Unified Trading Engine
APP_VERSION=1.0.0
APP_ENV=production
DEBUG=false
SECRET_KEY=your-super-secret-key-change-this-in-production

# =============================================================================
# SERVER SETTINGS
# =============================================================================
# Server host and port (leave PORT unset to auto-find free port)
HOST=0.0.0.0
PORT=8000
WORKERS=4
RELOAD=true
ACCESS_LOG=true
# Note: Use run_backend.py script to automatically find free port
# Or set PORT environment variable to use specific port

# =============================================================================
# DATABASE SETTINGS
# =============================================================================
# PostgreSQL Database Configuration
DATABASE_URL=postgresql://username:password@localhost:5432/trading_engine
DB_HOST=localhost
DB_PORT=5432
DB_NAME=trading_engine
DB_USER=username
DB_PASSWORD=password
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# REDIS SETTINGS
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=20

# =============================================================================
# BROKER CONFIGURATIONS
# =============================================================================

# MT4 Configuration
MT4_MANAGER_API_URL=http://localhost:4444
MT4_MANAGER_LOGIN=1
MT4_MANAGER_PASSWORD=your-mt4-manager-password
MT4_SERVER_TIMEOUT=30

# MT5 Configuration
MT5_MANAGER_API_URL=http://localhost:4445
MT5_MANAGER_LOGIN=1
MT5_MANAGER_PASSWORD=your-mt5-manager-password
MT5_SERVER_TIMEOUT=30

# TradeLocker Configuration
TRADELOCKER_BRAND_API_URL=https://api.tradelocker.com
TRADELOCKER_BRAND_ID=your-brand-id
TRADELOCKER_SERVER_URL=https://live.tradelocker.com
TRADELOCKER_WS_URL=wss://live.tradelocker.com/ws
TRADELOCKER_TIMEOUT=30

# Tradovate Configuration
TRADOVATE_API_URL=https://demo.tradovate.com
TRADOVATE_WS_URL=wss://demo.tradovate.com/ws
TRADOVATE_APP_ID=your-app-id
TRADOVATE_APP_VERSION=1.0.0
TRADOVATE_TIMEOUT=30

# ProjectX/TopStep Configuration
PROJECTX_GATEWAY_API_URL=https://gateway.projectx.com
PROJECTX_TIMEOUT=30

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# JWT Settings
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS Settings
CORS_ORIGINS=["https://yourdomain.com", "https://www.yourdomain.com"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOW_HEADERS=["*"]

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=100

# =============================================================================
# WEBHOOK SETTINGS
# =============================================================================
# Webhook Security
WEBHOOK_SECRET_KEY=your-webhook-secret-key
WEBHOOK_TIMEOUT=30

# TradingView Webhook
TRADINGVIEW_WEBHOOK_PATH=/webhooks/tradingview
TRADINGVIEW_WEBHOOK_SECRET=your-tradingview-secret

# TrailHacker Webhook
TRAILHACKER_WEBHOOK_PATH=/webhooks/trailhacker
TRAILHACKER_WEBHOOK_SECRET=your-trailhacker-secret

# =============================================================================
# RISK MANAGEMENT SETTINGS
# =============================================================================
# Position Sizing
MAX_POSITION_SIZE=100000
DEFAULT_POSITION_SIZE=10000
MAX_DAILY_LOSS=1000
MAX_OPEN_POSITIONS=10
RISK_PER_TRADE_PERCENTAGE=2.0

# Stop Loss & Take Profit
DEFAULT_STOP_LOSS_PIPS=50
DEFAULT_TAKE_PROFIT_PIPS=100
MIN_STOP_LOSS_PIPS=10
MIN_TAKE_PROFIT_PIPS=20

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/trading-engine/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# Error Reporting
SENTRY_DSN=your-sentry-dsn-for-error-tracking
ENABLE_ERROR_REPORTING=true

# =============================================================================
# CACHE SETTINGS
# =============================================================================
# Cache Configuration
CACHE_TTL=300
CACHE_MAX_SIZE=1000
ENABLE_CACHE=true

# Session Cache
SESSION_TTL=3600
SESSION_MAX_SIZE=100

# =============================================================================
# EMAIL SETTINGS (Optional)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=true
EMAIL_FROM=your-email@gmail.com
EMAIL_FROM_NAME=Trading Engine

# =============================================================================
# BACKUP SETTINGS
# =============================================================================
# Database Backup
ENABLE_DB_BACKUP=true
DB_BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_PATH=/var/backups/trading-engine

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# Frontend port (leave unset to auto-find free port starting from 3000)
# Backend API URL (will be auto-detected if using run_backend.py)
VITE_API_BASE_URL=http://localhost:8000
VITE_PORT=3000
BACKEND_PORT=8000
# Note: Use "npm run dev:free" to automatically find free port
# Or set PORT/VITE_PORT environment variable to use specific port

# =============================================================================
# NATS CONFIGURATION (Optional)
# =============================================================================
NATS_URL=nats://localhost:4222

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# =============================================================================
# DEVELOPMENT/OVERRIDE SETTINGS
# =============================================================================
# Uncomment for development environment
# DEBUG=true
# LOG_LEVEL=DEBUG
# RELOAD=true
# CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]